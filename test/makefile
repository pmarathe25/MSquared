# Automatically generated by msquared.MGen on 2018-05-19 17:01:52.004034.
# DO NOT MODIFY.

.PHONY: clean test lib install uninstall

build/source1.o: src/source1.cpp include/header1.hpp include/nestedHeader.hpp
	g++ -fPIC -c -O3 -flto -march=native -std=c++17 src/source1.cpp -o build/source1.o -Iinclude

build/source2.o: src/source2.cpp include/header2.hpp include/nestedHeader.hpp
	g++ -fPIC -c -O3 -flto -march=native -std=c++17 src/source2.cpp -o build/source2.o -Iinclude

build/test.o: test/test.cpp include/header1.hpp include/header2.hpp include/nestedHeader.hpp
	g++ -fPIC -c -O3 -flto -march=native -std=c++17 test/test.cpp -o build/test.o -Iinclude

lib/libtest.so: build/source1.o build/source2.o
	g++ -shared -O3 -flto -march=native build/source1.o build/source2.o -o lib/libtest.so 

test/test: lib/libtest.so build/test.o
	g++ -O3 -flto -march=native lib/libtest.so build/test.o -o test/test -lpthread

clean:
	rm -rf build/* lib/libtest.so test/test

test: test/test
	test/test

lib: lib/libtest.so
	

install: 
	mkdir -p /usr/local/include/MSquaredTest
	printf '#include "/home/pranav/Python/MSquared/test/include/header1.hpp"\n#include "/home/pranav/Python/MSquared/test/include/header2.hpp"\n#include "/home/pranav/Python/MSquared/test/include/nestedHeader.hpp"' > /usr/local/include/MSquaredTest/msquared.hpp

uninstall: 
	rm -rf /usr/local/include/MSquaredTest/msquared.hpp
	rmdir /usr/local/include/MSquaredTest

